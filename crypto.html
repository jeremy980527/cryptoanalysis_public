<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ å¯†è²¨å¹£è¶¨å‹¢ç›£æ§</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background-color: #121212; color: #e0e0e0; }
        h1 { text-align: center; color: #fff; margin-bottom: 5px; }
        .subtitle { text-align: center; color: #888; font-size: 0.9em; margin-bottom: 30px; }
        
        .status-bar { text-align: right; margin-bottom: 15px; font-size: 0.8em; color: #666; }
        .dot { display: inline-block; width: 8px; height: 8px; border-radius: 50%; background: #444; margin-right: 5px; }
        .dot.green { background: #4CAF50; box-shadow: 0 0 5px #4CAF50; }
        .dot.red { background: #F44336; }
        
        .section { margin-bottom: 25px; background: #1e1e1e; padding: 15px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .section h3 { margin-top: 0; border-bottom: 2px solid #333; padding-bottom: 10px; }
        .section.bull h3 { color: #4CAF50; border-color: #4CAF50; }
        .section.bear h3 { color: #F44336; border-color: #F44336; }
        .section.neut h3 { color: #2196F3; border-color: #2196F3; }

        ul { list-style: none; padding: 0; margin: 0; }
        li { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-bottom: 1px solid #333; transition: background 0.2s; }
        li:last-child { border-bottom: none; }
        li:hover { background: #2a2a2a; }
        
        .coin-name { font-weight: bold; font-size: 1.1em; color: #fff; }
        .badges { display: flex; gap: 8px; }
        .badge { padding: 4px 8px; border-radius: 6px; font-size: 0.85em; }
        .score-badge { background: #333; color: #ddd; }
        .msg-badge { background: #2a2a2a; border: 1px solid #444; color: #aaa; }
        
        .empty-msg { color: #555; font-style: italic; text-align: center; padding: 10px; }
        
        
        .loading { text-align: center; padding: 20px; color: #666; }
    </style>
</head>
<body>

    <h1>å¸‚å ´ç•°å¸¸ç›£æ§çœ‹æ¿</h1>
    <div class="subtitle">è‡ªå‹•è¿½è¹¤é«˜æ§“æ¡¿èˆ‡ç•°å¸¸äº¤æ˜“é‡å¹£ç¨®</div>

    <div class="status-bar">
        <span id="dot" class="dot"></span>
        <span id="statusText">é€£ç·šä¸­...</span>
    </div>

    <div id="content">
        <div class="loading">æ­£åœ¨ç­‰å¾…ä¼ºæœå™¨å›å‚³åˆ†æçµæœ...</div>
    </div>

    <script>
        
        async function updateDashboard() {
            const statusText = document.getElementById('statusText');
            const dot = document.getElementById('dot');
            const content = document.getElementById('content');
            
            try {
                
                const res = await fetch('http://localhost:8000/api/results');
                const json = await res.json();
                
                if (json.status === 'success') {
                    statusText.innerText = `æœ€å¾Œæ›´æ–°: ${json.timestamp}`;
                    dot.className = 'dot green';
                    renderLists(json.data);
                } else {
                    statusText.innerText = 'ä¼ºæœå™¨æ­£åœ¨è¨ˆç®—ä¸­...';
                    dot.className = 'dot';
                }
            } catch (e) {
                console.error(e);
                statusText.innerText = 'ç„¡æ³•é€£ç·šè‡³æ•¸æ“šä¸­å¿ƒ';
                dot.className = 'dot red';
            }
        }

        function renderLists(data) {
            const container = document.getElementById('content');
            container.innerHTML = ''; 

            const createSection = (title, list, typeClass) => {
                const sec = document.createElement('div');
                sec.className = `section ${typeClass}`;
                
                let listHtml = '';
                if (list.length === 0) {
                    listHtml = '<div class="empty-msg">ç›®å‰ç„¡ç¬¦åˆæ¢ä»¶å¹£ç¨®</div>';
                } else {
                    listHtml = '<ul>' + list.map(item => `
                        <li>
                            <span class="coin-name">${item.name}</span>
                            <div class="badges">
                                <span class="badge msg-badge">${item.msg}</span>
                                <span class="badge score-badge">ç¶œåˆåˆ†æ•¸ ${item.score}</span>
                            </div>
                        </li>
                    `).join('') + '</ul>';
                }

                sec.innerHTML = `<h3>${title}</h3>${listHtml}`;
                return sec;
            };

            container.appendChild(createSection('ğŸš€ å¤šé ­ç•°å¸¸ (Bullish)', data.bull, 'bull'));
            container.appendChild(createSection('ğŸ“‰ ç©ºé ­ç•°å¸¸ (Bearish)', data.bear, 'bear'));
            container.appendChild(createSection('âš–ï¸ ç­‰å¾…çªç ´ (Neutral)', data.neut, 'neut'));
        }

        
        updateDashboard();
        setInterval(updateDashboard, 10000); 
    </script>
</body>
</html>
